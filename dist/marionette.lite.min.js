!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("marionette-lite",[],t):"object"==typeof exports?exports["marionette-lite"]=t():e["marionette-lite"]=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Marionette.AppRouter.extend({before:function(e,t,r,n){var o=this._getController(),i={};if(_.isFunction(o.checkAccess)){var u=o.requresAuth||function(){return[]},c=o.preventAccessWhenAuth||function(){return[]};u().indexOf(t)!==-1&&(i=_.extend(i,{requiresAuth:!0})),c().indexOf(t)!==-1&&(i=_.extend(i,{preventAccessWhenAuth:!0}))}return _.isEmpty(i)?n.call(e):o.checkAccess(t,i,function(){return n.call(e)})},route:function(e,t,r){var n=this;_.isRegExp(e)||(e=this._routeToRegExp(e)),_.isFunction(t)&&(r=t,t=""),r||(r=this[t]);var o=this;return Backbone.history.route(e,function(i){var u=o._extractParameters(e,i);n.before(o,i,u,function(){o.execute(r,u,t)!==!1&&(o.trigger.apply(o,["route: "+t].concat(u)),o.trigger("route",t,u),Backbone.history.trigger("route",o,t,u))})}),this}});t["default"]=r,t.Router=r}])});